<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <link rel="stylesheet" type="text/css" href="styles.css">
  <script src="d3.min.js"></script>
  <script src="leftChart.js"></script>
  <script src="midleChart.js"></script>
  <script src="rightChart.js"></script>
  <script src="data.js"></script>
  <script src="analytics.js"></script>
  <script src="dataOperation.js"></script>
  <script src="jquery-3.4.1.min.js"></script>
  <script src="d3-array.v2.min.js"></script>
  <script src="dummyData.js"></script>
</head>

<body>
  <div>
    <input type="radio" name="view" value="date" checked>Date View
    <input type="radio" name="view" value="market">Market View

    <select id="mktfilter" style="padding-left: 20px">
      <option value="All">All</option>
    </select>
  </div>
  <table style="width:100%" border="0">  
    <tr>
      <td width="50%">
        <svg id="leftChart" width="600" height="300"></svg>
        </br>
        <span style="padding-left: 100px">
          <span class="legend" style=" background-color: #255663;" id="1_day"></span><span class="legend-text">1_Day</span>
          <span class="legend" style=" background-color: #388194;" id="3_day"></span><span class="legend-text">3_Day</span>
          <span class="legend" style=" background-color: #4BACC6;" id="7_day"></span><span class="legend-text">7_Day</span>
          <span class="legend" style=" background-color: #2FCDDC;" id="LF"></span><span class="legend-text">LF</span>
        </span>
      </td>
      <td width="25%">
        <svg id="midChart" width="300" height="300"></svg>
        <div>
          <span  style="padding-left: 100px">
            <span class="legend" style=" background-color: #D99694;" id="1_day"></span><span class="legend-text">YOY_CAP</span>
          </span>
        </div>
      </td> 
      <td width="25%">
        <svg id="rightChart" width="300" height="300"></svg>
        <div>
          <span  style="padding-left: 100px">
            <span class="legend" style=" background-color: #92D050;" id="1_day"></span><span class="legend-text">PACE</span>
          </span>
        </div>
      </td>
    </tr>  

    <tr>
      <td width="50%">
        <svg id="leftTotalChart" width="600" height="100"></svg>
      </td>
      <td width="25%">
        <svg id="midTotalChart" width="300" height="100"></svg>
      </td> 
      <td width="25%">
        <svg id="rightTotalChart" width="300" height="100"></svg>
      </td>
    </tr>  
  </table>
</body>

<script>
  $(document).ready(function() { 
     
      var chartdata, isDummyData=true, isDayMode=true;

      $('input:radio[name="view"]').change(function(){
          if($(this).val() == 'date') isDayMode=true;
          else isDayMode=false;
          renderChart();
      });

      function renderChart(){
          if(isDummyData){
            chartdata= isDayMode? dayWiseDummyData: marketWiseDummyData;
          }
          else{
            if(isDayMode) chartdata=prepareDayWiseData(rawData);
              else chartdata=prepareMarketWiseData(rawData);
          }     
          
          console.log(JSON.stringify(chartdata));
          // console.log(JSON.stringify(chartdata));

          drawLeftChart("#leftChart", chartdata);
        //   drawMidleChart("#midChart", chartdata);
        //   drawRightChart("#rightChart", chartdata);

          // drawLeftChart("#leftTotalChart", leftTotal);
          // drawMidleChart("#midTotalChart", rightTotal);
          // drawRightChart("#rightTotalChart", rightTotal);
      }
      
      var dataForDropDown=isDummyData? marketWiseDummyData: allData;
      loadMarketDropDown(dataForDropDown, isDummyData);
      renderChart();
  });

</script>
